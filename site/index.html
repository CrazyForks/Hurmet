
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hurmet.app</title>

<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="cm/codemirror.css">
<link rel="stylesheet" href="katex/katex.min.css">
<link rel="stylesheet" href="temml/temml.css">
<link rel="stylesheet" href="editor.css">
<link rel="stylesheet" href="tables.css">
<link rel="stylesheet" media="print" href="print.css">

<script src="cm/codemirror.js" defer></script>
<script src="cm/closebrackets.js" defer></script>
<script src="cm/matchbrackets.js" defer></script>
<script src="cm/simple.js" defer></script>
<script src="katex/katex.min.js"></script>
<script src="temml/temml.min.js"></script>
<script src="katex/mhchem.min.js" defer></script>
<script src="marked.js" defer></script>
<script src="chart.min.js" async></script>
<script src="hurmet.min.js"></script>
</head>

<body>
<nav>
   <ul>
     <li><a href="https://github.com/ronkok/Hurmet" target="_blank">GitHub</a></li>
     <li><a href="./docs/en/manual.html#tutorial" target="_blank">Tutorial</a></li>
     <li><a href="./docs/en/manual.html" target="_blank">Documentation</a></li>
     <li><a href="./examples.html" target="_blank">Examples</a></li>
   </ul>
</nav>

<div id="title">Hurmet</div>
 
<article>

<div id="slogan"><h4>Calculate and communicate</h4></div>

<p id="browser-support"></p>

<div class="prosemirror">
<table class="nogrid editor-wrap" id="wrap-table">
<thead><tr>
   <th></th>
   <th></th>
   <th></th>
</tr>
<tr><th></th><th></th><th></th></tr>
</thead>
<tbody><tr><td colspan="3">
</div>

<div id=editor style="margin-bottom: 23px"></div>
<div style="display: none" id="content">

<p>This is editable text. You can focus it and start typing. A calculation cell will open if you click on it. All calculations will update if you press <strong>Enter</strong> to close a calculation cell.</p>

<h4>Breaking Change</h4>

<p>The source code for data frames must now be pipe-separated values, not comma-separated values.</p>

<p>This week’s example:</p>

<h3>Active Tables</h3>
<p>A Hurmet data frame can contain formulas somewhat similar to a spreadsheet. Here’s an example:</p>
<p><span class="hurmet-calc" data-entry="format = &quot;h3&quot;"></span></p>
<p><span class="hurmet-calc" data-entry="V = '3.1 kips'"></span></p>
<p><span class="hurmet-calc" data-entry="dist = 
   ``Level|  W   | h  |  W × h  |        F         | V_i
          | kips | ft | kip·ft  |       kips       | kips
        4 | 1.2  | 20 | = W × h |=: V × Wh / Wh.Sum| = F
        3 | 2.2  | 22 |         |                  | = F + V_i′
        2 | 2.3  | 11 |         |                  |
        1 | 4.0  |  0 |         |                  |
      Sum |=sum()|    | =sum()  |       =sum()     | = V_i′``"></span></p>
<p>Remember that a data frame is written as pipe-separated values. Those values can be cell formulas. So the content of that calculation zone looks like this:</p>
<pre><code>dist = 
``Level|  W   | h  |  W × h  |        F         | V_i
       | kips | ft | kip·ft  |       kips       | kips
    4  | 1.2  | 22 | = W × h |=: V × Wh / Wh.Sum| = F
    3  | 2.2  | 22 |         |                  | = F + V_i′
    2  | 2.3  | 11 |         |                  |
    1  | 4.0  |  0 |         |                  |
   Sum |=sum()|    | =sum()  |       =sum()     | = V_i′``</code></pre>
<p>Notice some details:</p>
<ol>
   <li>
      <p>A table formula</p>
      <ul>
         <li>
            <p>begins with a “=” just like a spreadsheet.</p>
         </li>
         <li>
            <p>has variable names that are column headings, not “A1” type references. </p>
         </li>
         <li>
            <p>returns a result not only to its own cell, but also to every non-formula cell below it.</p>
         </li>
         <li>
            <p>begins with “=:” if the formula is unit-aware.</p>
         </li>
      </ul>
   </li>
   <li>
      <p>In a table’s bottom row, a <code>sum()</code> function is valid with no arguments. It will return the sum of the column.</p>
   </li>
   <li>
      <p>An active table can have units-of-measure. Just write unit names in row 2 of the pipe-separated input.</p>
   </li>
   <li>
      <p>Data in any one column must all be the same data type and carry the same unit-of-measure.</p>
   </li>
   <li>
      <p>A table variable can:</p>
      <ul>
         <li>
            <p>… omit spaces and characters that are invalid for identifiers. So “<code>Wh</code>” will call column “W × h”</p>
         </li>
      </ul>
      <ul>
         <li>
            <p>… call a value from outside the table, such as <code>V</code>.</p>
         </li>
         <li>
            <p>… call a cell from the previous row by appending a prime to a column heading, as in <code>V_i′</code>.</p>
         </li>
      </ul>
   </li>
</ol>
<p>Table calculations proceed column-wise. Subject to that constraint, you can call individual cells via dot notation, such as <code>Wh.Sum</code>.</p>
<p>Other calculation cells can call data from inside a table, using the same accessor notation as a data frame. The left column values can be used as keys to access data in the table.</p>

</div> <!-- editor -->

</td></tr></tbody>
</table>
</article>

<div id="copyright">Copyright © 2020-2021 Ron Kok. Released under the <a href="https://opensource.org/licenses/MIT">MIT License</a></div>

<script>
  // Write a warning if the browser does not support BigInt.
  const warningGraf = document.getElementById("browser-support")
  try { BigInt(2) }
  catch(error) {
     warningGraf.textContent = "Hurmet does not work in this browser because it does not support big integers. Chrome, Edge, Firefox, Opera, Vivaldi, and Brave all support BigInt. Safari BigInt is in development."
   }
    
  window.addEventListener('beforeunload', function (e) {
	// If changes have been made, put up a dialog box to warn the user.
	// The content of this dialog box is a browser standard. We can't change its content here.
	e.preventDefault()
	e.returnValue = ''
  })
</script>
<script src="prosemirror.min.js"></script>
  
</body>
</html>
