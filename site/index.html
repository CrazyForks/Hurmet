
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hurmet.app</title>

<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="cm/codemirror.css">
<link rel="stylesheet" href="katex/katex.min.css">
<link rel="stylesheet" href="temml/temml.css">
<link rel="stylesheet" href="editor.css">
<link rel="stylesheet" href="tables.css">
<link rel="stylesheet" media="print" href="print.css">

<script src="cm/codemirror.js" defer></script>
<script src="cm/closebrackets.js" defer></script>
<script src="cm/matchbrackets.js" defer></script>
<script src="cm/simple.js" defer></script>
<script src="katex/katex.min.js"></script>
<script src="temml/temml.min.js"></script>
<script src="katex/mhchem.min.js" defer></script>
<script src="marked.js" defer></script>
<script src="chart.min.js" async></script>
<script src="hurmet.min.js"></script>
</head>

<body>
<nav>
   <ul>
     <li><a href="https://github.com/ronkok/Hurmet" target="_blank">GitHub</a></li>
     <li><a href="./docs/en/manual.html#tutorial" target="_blank">Tutorial</a></li>
     <li><a href="./docs/en/manual.html" target="_blank">Documentation</a></li>
     <li><a href="./examples.html" target="_blank">Examples</a></li>
   </ul>
</nav>

<div id="title">Hurmet</div>
 
<article>

<div id="slogan"><h4>Calculate and communicate</h4></div>

<p id="browser-support"></p>

<div class="prosemirror">
<table class="nogrid editor-wrap" id="wrap-table">
<thead><tr>
   <th></th>
   <th></th>
   <th></th>
</tr>
<tr><th></th><th></th><th></th></tr>
</thead>
<tbody><tr><td colspan="3">
</div>

<div id=editor style="margin-bottom: 23px"></div>
<div style="display: none" id="content">

<p>This is editable text. You can focus it and start typing. A calculation cell will open if you click on it. All calculations will update if you press <strong>Enter</strong> to close a calculation cell.</p>

<p>This week’s example:</p>

<h3>Unit-Handling</h3>
<p>I remember the exact moment when I realized that Hurmet must handle units. I had completed a calculation package and passed it to another engineer for review. He found two unit-conversion errors.</p>
<p>Do you believe that? Two errors! Two errors in MY calculation package! Well, that had to stop.</p>
<p>So Hurmet can do automatic unit conversions and unit compatibility checks.</p>
<p>First, automatic unit conversion: Every quantity is converted into its SI base unit. Then the units are dropped and the calculation is done with the scalar numbers. At the end of the calculation, the final scalar is converted from SI base units into the units that you have specified for the result.</p>
<p>Example</p>
<p><span class="hurmet-calc" data-entry="'30 lbf' / '2 ft²' = '133.446648457815 N'/'0.18580608 m²' ⇒ 133.446648457815 / 0.18580608 = 718.2038847050376 ⇒ '0.10417 psi'"></span></p>
<p>That last step applies a unit factor to a number, assuming that the number carries the compatible base unit<sup>[1]</sup>. But what if that assumption is wrong? What if you specified an incompatible unit for the result?  To prevent such an error, Hurmet does a unit-compatibility check.</p>
<p>With each unit-aware calculation, Hurmet does a parallel calculation on the units within each quantity. First, each unit is broken down into its base dimensions. Hurmet’s base dimensions are:  length,  mass,   time,  electric current,  temperature,  amount,  luminous intensity,  money.</p>
<p>For example, a unit of <em>volume</em> is treated as <em>length</em><sup>3</sup>.  A <em>force</em> is treated as: <em>mass</em><sup>1</sup> · <em>length</em><sup>1</sup> · <em>time</em><sup>-2</sup>. Hurmet’s built-in unit data<sup>[2]</sup> contains not only conversion factors, but also the unit-checking exponents for each built-in unit.</p>
<p>In a unit-aware calculation, each arithmetic operation is accompanied by 8 more operations, one on each unit-checking exponent. Since these are exponents, we apply the logarithms of the original operations. When the calculation multiplies, the unit-checking exponents are added. When the calculation adds, the unit-checking exponents are compared. They must be identical at an addition, or a unit error is indicated.</p>
<p>Example</p>
<p><span class="hurmet-calc" data-entry="'30 lbf' / '2 ft²' ⇒ (mass¹·length¹·time⁻²) / length² = mass¹·length⁻¹·time⁻²"></span></p>
<p>The base dimensions for psi are also <em>mass</em><sup>1</sup> · <em>length</em><sup>-1</sup> · <em>time</em><sup>-2</sup>. So this calculation checks out as okay. If those exponents do not agree, Hurmet will return an error message.</p>
<p><span class="hurmet-calc" data-entry="'30 lbf' / '2 ft²' = ?? volts"></span></p>
<p>In my own work, I find automatic unit-handling to be extremely useful. Once you try it, you may wonder how you ever did without it.</p>
<p></p>
<p>[1]: Hurmet base units are the SI base units, with two exceptions: <em>Amount</em>‘s base is <em>1 unit</em>. SI uses <em>1 mole</em>,  which is just silly. For money, Hurmet’s base is the Euro. Hurmet’s exchange rate data is updated once per week with data from the European Central bank.</p>
<p>[2]: Hurmet’s built-in unit data is tabulated at: https://hurmet.app/docs/en/unit-definitions.html<br>       The source code is at: https://github.com/ronkok/Hurmet/blob/master/src/units.js</p>

</div> <!-- editor -->

</td></tr></tbody>
</table>
</article>

<div id="copyright">Copyright © 2020-2021 Ron Kok. Released under the <a href="https://opensource.org/licenses/MIT">MIT License</a></div>

<script>
  // Write a warning if the browser does not support BigInt.
  const warningGraf = document.getElementById("browser-support")
  try { BigInt(2) }
  catch(error) {
     warningGraf.textContent = "Hurmet does not work in this browser because it does not support big integers. Chrome, Edge, Firefox, Opera, Vivaldi, and Brave all support BigInt. Safari BigInt is in development."
   }
    
  window.addEventListener('beforeunload', function (e) {
	// If changes have been made, put up a dialog box to warn the user.
	// The content of this dialog box is a browser standard. We can't change its content here.
	e.preventDefault()
	e.returnValue = ''
  })
</script>
<script src="prosemirror.min.js"></script>
  
</body>
</html>
